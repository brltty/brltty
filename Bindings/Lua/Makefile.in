###############################################################################
# libbrlapi - A library providing access to braille terminals for applications.
#
# Copyright (C) 2006-2022 by Dave Mielke <dave@mielke.cc>
#
# libbrlapi comes with ABSOLUTELY NO WARRANTY.
#
# This is free software, placed under the terms of the
# GNU Lesser General Public License, as published by the Free Software
# Foundation; either version 2.1 of the License, or (at your option) any
# later version. Please see the file LICENSE-LGPL for details.
#
# Web Page: http://brltty.app/
#
# This software is maintained by Dave Mielke <dave@mielke.cc>.
###############################################################################

include $(SRC_TOP)bindings.mk

LUA_OK = @LUA_OK@
LUA_INCLUDES = @lua_includes@
LUA_LIBS = @lua_libs@

LUA_API_NAME = $(API_NAME)
LUA_API_OBJECT = $(LUA_API_NAME).$O
LUA_API_LIBRARY = $(LUA_API_NAME).$(LIB_EXT)

all: $(LUA_API_LIBRARY)

$(LUA_API_LIBRARY): $(LUA_API_OBJECT)
	$(MKLIB:<name>=$(LUA_API_LIBRARY).$(API_VERSION)) $@ $(LUA_API_OBJECT) $(LUA_LIBS) $(API_LDFLAGS)

$(LUA_API_OBJECT): | $(API_NAME)
	$(CC) $(LIBCFLAGS) $(LUA_INCLUDES) -o $@ -c $(SRC_DIR)/brlapi.c

